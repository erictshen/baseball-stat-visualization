<!DOCTYPE html>
<!-- saved from url=(0034)http://noahveltman.com/nflplayers/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=480">
    <link rel="stylesheet" href="./index_files/css" type="text/css">
    <link rel="stylesheet" href="./index_files/jquery.nouislider.css" type="text/css">
    <style>

      body {
        font-family: Lato, Arial, Helvetica, Verdana, sans-serif;
        background-color: #fff;
        color: #000;
        padding: 0px;
        margin: 0;
        font-size: 13px;
      }

      div {
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
      }

      div.title {
        padding-top: 10px;
        font-size: 22px;
        font-weight: bold;
      }

      div.description {
        font-size: 14px;
      }

      a,a:active,a:visited {
        color: steelblue;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      rect {
        shape-rendering: crispEdges;
      }

      .clear {
        clear: both;
      }

      .axis path, .axis line {
        fill: none;
        stroke: #333;
        shape-rendering: crispEdges;
      }

      div.container-outer {
        padding: 0px 10px;
        margin-left: auto;
        margin-right: auto;
        width: 471px;
      }

      div.container {
        width: 451px;
      }

      .axis text {
        font-size: 12px;
      }

      .axis .axis-label {
        text-anchor: middle;
        font-weight: bold;
        fill: #333;
        font-size: 13px;
      }

      rect.bg {
        fill: #e3e3e3;
        stroke: none;
      }

      circle {
        fill: blue;
        stroke: none;
        shape-rendering: crispEdges;
      }

      text.chart-title {
        font-size: 30px;
        font-weight: bold;
        text-anchor: end;
      }

      div.chart {
        padding-bottom: 20px;
      }

      div.header {
        padding-bottom: 12px;
      }

      span.year {
        position: relative;
        top: 32px;
        right: 3px;
        text-align: center;
        font-weight: bold;
        display: block;
        font-size: 16px;
        pointer-events: none;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      div#play {
        cursor: pointer;
        float: left;
        width: 51px;
        height: 51px;
        border: 1px solid #d9d9d9;
        border-radius: 3px;
        background: #fff;
        padding-top: 15px;
        letter-spacing: 0.03em;
        text-transform: uppercase;
        font-weight: bold;
        color: #666;
        box-shadow: inset 0 0 1px #fff,
         inset 0 1px 7px #ebebeb,
         0 3px 6px -3px #bbb;
        text-align: center;
        position: relative;
        bottom: 15px;
        margin-left: 40px;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      div#play:hover {
         color: #333;
         border-color: #999;
      }

      div#play:active {
        left: 1px;
        bottom: 14px;
      }

      div#slider {
        float: left;
        width: 300px;
        margin-left: 40px;
        margin-right: 20px;
      }

      div.controls {
        display: none;
      }

      div.noUi-base,div.noUi-handle {
        cursor: pointer;
      }

      div.noUi-handle:hover {
        border-color: #999;
      }

      .noUi-connect {
        background-color: #cb181d;
      }

      rect.chart-title-background {
        fill: #fff;
        stroke: #e3e3e3;
        stroke-width: 1px;
      }

      g.legend text {
        text-anchor: start;
        text-rendering: optimizeLegibility;
      }

      div.faq {
        padding-top: 20px;
      }

      div.question {
        font-weight: bold;
        padding-bottom: 2px;
      }

      div.answer {
        padding-left: 8px;
        line-height: 135%;
        padding-bottom: 12px;
      }

    </style>
    <title>MLB: Team Stolen Bases vs. Home Runs Over Time</title>

    <meta property="og:type" content="website">
    <meta property="og:url" content="http://noahveltman.com/nflplayers/">
    <meta property="og:title" content="NFL players: height &amp; weight over time">
    <meta property="og:description" content="An animated look at just how much bigger NFL players have gotten over time.">
    <meta property="og:image" content="http://noahveltman.com/nflplayers/fb-image.png">

  <style type="text/css"></style></head>
  <body>
    <div class="container-outer">
      <div class="container">
        <div class="header">
          <div class="title">
            MLB: Team Stolen Bases vs. Home Runs Over Time
          </div>
          <div class="credits">By Eric Shen, template from <a href="http://twitter.com/veltman">Noah Veltman</a></div>
          <div class="description">
          </div>
        </div>
        <div class="chart"></div>
        <div class="controls"><div id="play">PLAY</div><div id="slider"></div><div class="clear"></div></div>
        <div class="faq">
          <div class="question">What is this visualization?</div>
          <div class="answer">This visualization shows the distribution of teams based on their total stolen bases and total home runs for a season from 1900-2013. Each of the buckets covers a range of 20 for both stolen bases and home runs. For instance, if the San Francisco Giants had 121 home runs and 149 stolen bases, they would fall in the 120 - 140 Home Runs and 140 - 160 Stolen Bases bucket. Each of these buckets shows the number of teams that fell within that Home Run and Stolen Base range for that specific season.</div>
          <div class="question">What are some of the trends over time?</div>
          <div class="answer">From 1900 - 1920, there were very few home runs but a very high number of stolen bases for teams. This corresponds to the time period in baseball known as the <a href="http://en.wikipedia.org/wiki/Dead-ball_era">Dead-Ball Era</a>, when games were extremely low scoring and there were very few runs. From 1920 - 1980, the number of stolen bases drastically declined and the number of home runs steadily increased, as power hitting became more prevalent throughout the league. The number of stolen bases increased again during the 1980s, when the number of runs scored in Major League Baseball drastically decreased, thus increasing the significance of small ball. Since 1990, however, the number of stolen bases for teams has once again declined, while the number of home runs has continued to increase.</div>
          <div class="question">Where is the data from?</div>
          <div class="answer">The data is taken from the <a href="http://mlb.mlb.com/stats/">MLB Website</a>.</div>
        </div>
      </div>
    </div>
    <script src="./index_files/d3.v3.min.js"></script>
    <script src="./index_files/jquery.min.js"></script>
    <script src="./index_files/jquery.nouislider.min.js"></script>
    <script>

      var $slider = $("#slider"),
          playButton = d3.select("div#play"),
          year,
          interval;

      d3.json("data.json",function(err,bins){
        
          //initializes the necessary constants for the chart.
          var cell = doCellSizing(),
              width = cell*18+1,
              height = cell*15+1,
              margin = {top: cell+20, right: 0, bottom: 36, left: 50},
              currentYear = 1900;

          d3.select("div.container").style("width",(width+margin.left+margin.right)+"px");

          d3.select("div.container-outer").style("width",(width+margin.left+margin.right+20)+"px");

          $slider.css("width",(width+margin.left+margin.right-151)+"px");

          //generates x and y coordinates
          var x = d3.scale.ordinal()
            .domain(d3.range(0,360,20))
            .rangeBands([0,width],0.05);

          var y = d3.scale.ordinal()
            .domain(d3.range(0,300,20).reverse())
            .rangeBands([0,height],0.05);

          //initializes color ranges
          var color = d3.scale.quantize()
            .domain([0,6])
            // .range(["#ffffff","#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"]);
            // .range(["#ffffff","#fee0d2","#fc9272","#ef3b2c","#cb181d","#99000d"])
            .range(["#ffffff", "#cccccc", "#999999", "#666666", "#333333", "#000000"])

          //initializes the axes
          var xAxis = d3.svg.axis()
            .scale(x)
            .tickValues(x.domain().filter(function(d){
              return d % 20 == 0;
            }))
            .orient("bottom");

          var yAxis = d3.svg.axis()
              .scale(y)
              .tickValues(y.domain().filter(function(d){
                return d % 20 == 0;
              }))
              .orient("left");

          //initializes chart
          var svg = d3.select("div.chart").append("svg")
              .attr("width", width+margin.left+margin.right)
              .attr("height", height+margin.top+margin.bottom)
              .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

          //initializes cells in the chart
          var bg = svg.append("rect")
            .attr("class","bg")
            .attr("x",0)
            .attr("y",0)
            .attr("width",width)
            .attr("height",height);

          //fills in correct values for each cell, given the data
          var rects = svg.selectAll("rect.cell")
            .data(bins[currentYear])
            .enter()
            .append("rect")
              .attr("class","cell")
              .attr("x",function(d){
                return x(d.sb);
              })
              .attr("y",function(d){
                return y(d.hr);
              })
              .attr("width",x.rangeBand())
              .attr("height",y.rangeBand())
              .style("fill",function(d){
                return color(d.total);
              });

          svg.append("rect")
            .attr("class","chart-title-background")
            .attr("x",width-81-1)
            .attr("y",height-47)
            .attr("width",81)
            .attr("height",47);

          svg.append("text")
            .attr("class","chart-title year")
            .text(currentYear)
            .attr("x",width)
            .attr("y",height)
            .attr("dx","-0.3em")
            .attr("dy","-0.4em");

          //renders x-axis and y-axis, and adds the axis titles
          var gx = svg.append("g")
            .attr("class","x axis")
            .attr("transform","translate(0,"+height+")");

          gx.call(xAxis);

          gx.append("text")
            .text("Stolen Bases")
            .attr("y",margin.bottom)
            .attr("class","axis-label")
            .attr("x",width/2)
            .attr("dy","-2px");

          var gy = svg.append("g")
            .attr("class","y axis")
          
          gy.call(yAxis);

          gy.append("text")
            .text("Home Runs")
            .attr("y",height/2)
            .attr("class","axis-label")
            .attr("x",12-margin.left)
            .attr("transform","rotate(-90 "+(12-margin.left)+" "+(height/2)+")");

          // creates the legend for the visualization
          var legend = svg.append("g")
            .attr("class","legend")
            .attr("transform","translate(" + (width - (cell*6*2) - 5) + "," + (-margin.top) + ")");

          var swatches = legend.selectAll("g")
            .data(color.range())
            .enter()
            .append("g");

          //fills in the colors of the legend correctly
          swatches.append("rect")
            .attr("width",cell*2)
            .attr("height",cell)
            .style("fill",function(d){
              return d;
            })
            .attr("x",function(d,i){
              return (i*cell*2);
            })
            .attr("y",0);

          // adds the text labels
          swatches.append("text")
            .attr("x",function(d,i){
              return cell*2*i + 2;
            })
            .text(function(d,i){
              return i;
            })
            .style("font-size",(cell <= 20 ? "10px" : "12px"))
            .attr("y",cell+10);

          // creates the slider and initializes it
          $slider.noUiSlider({
            start: 1900,
            range: {
              'min': 1900,
              'max': 2013
            },
            connect: "lower",
            step: 1
          });

          $("div.noUi-handle").append('<span class="year">1900</div>');

          year = d3.selectAll(".year");

          // slider click listener (stops animation when dragged, and sets it to the proper year)
          $slider.on("slide click",function(e){
            stop();
            currentYear = +$(this).val();
            updateYear(currentYear);
          });

          // playButton that toggles between starting and stopping
          playButton.datum(false).on("click",function(d){
            if (d) stop();
            else start();
          });

          d3.select("div.controls").style("display","block");

          // starts the slider! (For the first time)
          start();

          // starts the slider up so that it will step through the years.
          function start() {

            clearInterval(interval);

            playButton.datum(true).text("STOP");

            update();

            interval = setInterval(update,250);

          }

          //stops the slider.
          function stop() {
            clearInterval(interval);

            playButton.datum(false).text("PLAY");
          }

          //updates the plot to reflect the current year. wraps around if necessary
          function update() {

            currentYear++;
            if (currentYear > 2013) currentYear = 1900;

            updateYear(currentYear);

          }

          //updates the plot for the passed in year parameter. Also advances the slider
          function updateYear(yr) {

            rects.data(bins[yr])
              .style("fill",function(d){
                return color(d.total);
              });

            year.text(yr);
            $slider.val(yr);

          }

          function doCellSizing() {
            if (window.innerWidth > 700) {
              return 25;
            }
            return 20;
          }

      });

    </script>
  
</body></html>